---
export const prerender = false;

import Layout from '../../layouts/Layout.astro';
import Link from '../../components/Link.astro'
import onboarding from '../../assets/images/onboarding.webp'

import Button from '../../components/Button.svelte'

const { id } = Astro.params

if(id === undefined) return Astro.redirect("/")
const response = await fetch(new URL(`/api/process/${id}/meta`, Astro.url))

if(!response.ok) return Astro.redirect("/")
const res = await response.json()

---
<Layout>
	<main class="flex flex-col max-h-[30rem] items-center gap-10 px-4">
		<img src={onboarding.src} alt="on Boarding">

		{
			res.active ? (
				<section class="grid gap-2">
					<h1 class="font-bold text-3xl text-[#13222A] text-center text-pretty">
						¡Bienvenido a tu Identidad Digital!
					</h1>
					<p class="text-base font-normal text-[#3A4B53] text-center">
						Para continuar tu proceso con <strong class="font-bold">{ res.process }</strong>, es necesario crear tu identidad digital segura con SoyYO, solo necesitarás:
						<strong class="font-bold">Tu selfie y tu cédula (debes tenerla a mano)</strong>
					</p>
				</section>
		
				<Button id={id} client:only />
				
			) : (
				<section class="grid gap-2">
					<h1 class="font-bold text-3xl text-[#13222A] text-center text-pretty">
						¡Bienvenido a tu Identidad Digital!
					</h1>
					<p class="text-base font-normal text-[#3A4B53] text-center">
						Para continuar tu proceso con <strong class="font-bold">{ res.process }</strong>, es necesario crear tu identidad digital segura con SoyYO, solo necesitarás:
						<strong class="font-bold">Tu selfie y tu cédula (debes tenerla a mano)</strong>
					</p>
				</section>

				<Link href='http://www.google.com'>
					Tu proceso caduco
				</Link>
			)
		}
	</main>
</Layout>
