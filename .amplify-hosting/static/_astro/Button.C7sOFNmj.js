import{c as k,r as M,d as v,p as j,a as w,b as A,h as b,e as B,m as D,s as N,f as O,u as P,g as R,i as U,j as G,E as H,k as I,H as K,l as L,n as q,o as g,q as z,t as J,v as V,w as p,x as Y,y as Q,z as x,A as E,B as S,C as T,D as W,F as X,G as F}from"./template.zm-KKSuI.js";const Z="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Z);function $(d){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}class ee{anchor;#t=new Map;#s=new Map;#e=new Map;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#r=()=>{var e=k;if(this.#t.has(e)){var a=this.#t.get(e),t=this.#s.get(a);if(t)M(t);else{var n=this.#e.get(a);n&&(this.#s.set(a,n.effect),this.#e.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),t=n.effect)}for(const[o,s]of this.#t){if(this.#t.delete(o),o===e)break;const r=this.#e.get(s);r&&(v(r.effect),this.#e.delete(s))}for(const[o,s]of this.#s){if(o===a)continue;const r=()=>{if(Array.from(this.#t.values()).includes(o)){var h=document.createDocumentFragment();D(s,h),h.append(w()),this.#e.set(o,{effect:s,fragment:h})}else v(s);this.#s.delete(o)};this.#a||!t?j(s,r,!1):r()}}};#n=e=>{this.#t.delete(e);const a=Array.from(this.#t.values());for(const[t,n]of this.#e)a.includes(t)||(v(n.effect),this.#e.delete(t))};ensure(e,a){var t=k,n=N();if(a&&!this.#s.has(e)&&!this.#e.has(e))if(n){var o=document.createDocumentFragment(),s=w();o.append(s),this.#e.set(e,{effect:A(()=>a(s)),fragment:o})}else this.#s.set(e,A(()=>a(this.anchor)));if(this.#t.set(t,e),n){for(const[r,c]of this.#s)r===e?t.skipped_effects.delete(c):t.skipped_effects.add(c);for(const[r,c]of this.#e)r===e?t.skipped_effects.delete(c.effect):t.skipped_effects.add(c.effect);t.oncommit(this.#r),t.ondiscard(this.#n)}else b&&(this.anchor=B),this.#r()}}function te(d){O===null&&$(),P(()=>{const e=R(d);if(typeof e=="function")return e})}function C(d,e,a=!1){b&&G();var t=new ee(d),n=a?H:0;function o(s,r){if(b){const h=I(d)===K;if(s===h){var c=L();q(c),t.anchor=c,g(!1),t.ensure(s,r),g(!0);return}}t.ensure(s,r)}U(()=>{var s=!1;e((r,c=!0)=>{s=!0,o(c,r)}),s||o(!1,null)},n)}async function se(d,e){const a=document.cookie.split("; ").reduce((l,_)=>{const[m,u]=_.split("=");return Object.assign(l,{[m]:u}),l},{});if(!("key"in a))return;const t=Uint8Array.from(atob(d),l=>l.charCodeAt(0)),n=Uint8Array.from(atob(e),l=>l.charCodeAt(0)),o=Uint8Array.from(atob(a.key),l=>l.charCodeAt(0));document.cookie="key=; Max-Age=0; Path=/; Secure; SameSite=Strict;";const s=await crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!1,["decrypt"]),r=t.slice(0,-16),c=t.slice(-16),h=new Uint8Array([...r,...c]),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,h),f=new TextDecoder().decode(i);return JSON.parse(f)}var ae=T('<button class="flex justify-center items-center min-h-12 bg-[#000] py-2 px-6 font-bold text-base text-[#FAFAFA] rounded-sm w-full">Oh noo</button>'),re=T('<button class="flex justify-center items-center min-h-12 bg-[#3A4B53] py-2 px-6 font-bold text-base text-[#FAFAFA] rounded-sm w-full"><!></button>');function oe(d,e){Q(e,!0);let a,t=E(!0),n=E(!1);te(async()=>{try{const i=await fetch(`/api/process/${e.id}`);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const f=await i.json();a=await se(f.data,f.iv)}catch{x(n,!0)}finally{x(t,!1)}});const o=()=>{console.log(a)};var s=J(),r=V(s);{var c=i=>{var f=ae();p(i,f)},h=i=>{var f=re();f.__click=o;var l=W(f);{var _=u=>{var y=F("Â¨Preparando proceso...");p(u,y)},m=u=>{var y=F("Continuar");p(u,y)};C(l,u=>{S(t)?u(_):u(m,!1)})}X(f),p(i,f)};C(r,i=>{S(n)?i(c):i(h,!1)})}p(d,s),Y()}z(["click"]);export{oe as default};
